.header {
  --header-height: 70px;
  --gutter-xxs: 12px;
  --gutter-xs: 14px;
  --gutter-sm: 24px;
  --gutter: 36px;
  --gutter-lg: 48px;
  --dropdown-min-width: 250px;
  --font-sm: 14px;
  --font-md: 18px;
  --font-lg: 24px;

  top: var(--header-position-top);
  background-color: var(--background-color);
  height: var(--header-height);

  .header__wrapper {

    // mobile
    @breakpoint md-max {
      .header__hamburger {
        margin-right: calc(var(--gutter-sm) * 2);
      }
    }
  }

  // reset
  .header__inner a:link,
  .header__inner a:visited {
    color: var(--link-color);
    font-size: var(--font-md);
    --icon-color: var(--link-color);

    &:hover,
    &:active {
      color: var(--link-hover-color);
      --icon-color: var(--link-hover-color);
    }
  }

  .ra-icon svg { transition: all .3s; }

  .header__hamburger {
    width: var(--gutter-sm);

    .hamburger-icon { display: flex; }
    .close-icon { display: none; }

    &.active {
      .hamburger-icon { display: none; }
      .close-icon { display: flex; }
    }
  }

  // logo
  .header__logo {
    margin-right: var(--gutter-sm);
    max-width: var(--logo-width-mobile);

    @breakpoint md {
      max-width: var(--logo-width-desktop);
    }
  }

  // menu - desktop
  .header__navigation {

    .header__navigation-item:hover svg {
      transform: rotate(180deg);
    }

    .header__navigation-link {
      padding: 0 var(--gutter-sm);

      .ra-icon {
        margin-left: var(--gutter-xxs);
        &,
        svg {
          width: var(--gutter-xxs);
          height: var(--gutter-xxs);
        }
      }
    }

    .header__navigation-item.header__navigation-item--has-child,
    .header__navigation-item.header__navigation-item--has-mega-menu {

      .header__navigation-dropdown {
        background-color: var(--background-color);
        border-top: 1px solid var(--link-color);

        &.active {
          opacity: 1;
          display: flex;
          flex-direction: column;
        }
      }
    }

    // dropdown 1 level link
    .header__navigation-item.header__navigation-item--has-child {
      .header__navigation-dropdown {
        padding: var(--gutter-sm);
        min-width: var(--dropdown-min-width);
      }

      .header__navigation-dropdown-item {
        &:not(:last-child) {
          margin-bottom: var(--gutter-xs);
        }
      }
      .header__navigation-dropdown-link {
        font-size: var(--font-sm);
        line-height: var(--font-sm);
      }
    }

    // mega menu - 2+ level links
    .header__navigation-item.header__navigation-item--has-mega-menu {
      .header__navigation-dropdown {
        top: var(--dropdown-position-top);
        padding: var(--gutter-sm) 0 var(--gutter-sm) 0;
      }

      .header__navigation-dropdown-mega-menu {
        gap: var(--gutter-sm);
        grid-template-columns: repeat(3, 1fr);

        @breakpoint md {
          grid-template-columns: repeat(5, 1fr);
        }

        .header__navigation-dropdown-link--label {
          margin-bottom: var(--font-lg);
        }
      }
    }

    // Featured Content
    .header__navigation-featured-content {

      .header__navigation-featured-content-wrapper {
        padding: var(--gutter-sm);
      }

      .header__navigation-featured-content-title {
        color: var(--color-grey-900);
        font-size: var(--font-lg);
      }

      .header__navigation-featured-content-button {
        margin-top: var(--gutter-xs);
        font-size: unset
      }

      &.portrait {
        aspect-ratio: 0.85 / 1;
        height: auto;
      }
      &.square {
        aspect-ratio: 1 / 1;
        height: auto;
      }
    }
  }

  // menu - mobile
  .header__mobile-navigation {
    top: var(--content-position-top);
    height: calc(100vh - var(--content-position-top));
    border-top: 1px solid var(--link-color);
    background-color: var(--background-color);

    &.active {
      @breakpoint md-max {
        display: flex;
        flex-direction: column;
        opacity: 1;
      }
    }

    .header__mobile-navigation-item {
      border-bottom: 1px solid var(--link-color);
    }

    .header__mobile-navigation-link {
      padding: var(--gutter-sm);
      font-size: var(--font-md);

      .ra-icon {
        &,
        svg {
          width: var(--gutter-xxs);
          height: var(--gutter-xxs);
        }
      }
    }

    // drawer - 2nd level menu
    .header__mobile-navigation-drawer {
      top: -var(--content-position-top);
      background-color: var(--background-color);

      &.active {
        left: 0;
      }

      // drawer header
      .header__mobile-navigation-drawer-header {
        height: var(--header-height);
        border-bottom: 1px solid var(--link-color);
        background-color: var(--background-color);
      }
      .header__mobile-navigation-drawer-close {
        padding: var(--gutter-sm);
        .ra-icon {
          &,
          svg {
            width: 16px;
            height: 16px;
          }
        }
      }
      .header__mobile-navigation-drawer-title {
        font-size: var(--font-md);
        color: var(--link-color);
      }

      // drawer content
      .header__mobile-navigation-drawer-content {
        margin-top: var(--header-height);
      }
      .header__mobile-navigation-link {
        padding-bottom: var(--gutter-sm);

        &.active svg {
          transform: rotate(-180deg);
        }
      }

      // dropdown - 3rd level menu
      .header__mobile-navigation-dropdown {
        padding: 0 var(--gutter-sm);

        &.active {
          overflow: visible;
          min-height: var(--dropdown-height);
        }

        .header__mobile-navigation-item {
          margin-bottom: var(--gutter-xs);
          &:last-child {
            margin-bottom: var(--gutter-sm);
          }
        }

        .header__mobile-navigation-link {
          font-size: var(--font-sm);
        }
      }
    }

    // Featured Content
    .header__mobile-navigation-featured-content {
      max-width: calc(100% - var(--gutter-lg));
      margin-top: var(--gutter-sm);
      left: var(--gutter-sm);

      &:last-child {
        margin-bottom: var(--gutter-sm);
      }

      .header__mobile-navigation-featured-content-wrapper {
        padding: var(--gutter-sm);
      }

      .header__mobile-navigation-featured-content-title {
        color: var(--color-grey-900);
        font-size: var(--font-md);
      }

      .header__mobile-navigation-featured-content-button {
        margin-top: var(--gutter-xxs);
        font-size: unset;
      }
    }

    // util links
    .header__mobile-navigation-util {
      padding: var(--gutter-sm) var(--gutter-sm) var(--gutter-lg) var(--gutter-sm);

      .ra-header-util {
        transform: unset;
      }

      .ra-header-util__item { padding: 0; }
      .ra-header-util__item:not(:last-child),
      .header__action-item {
        margin-bottom: var(--gutter-sm);
      }
    }
  }

  // header action links
  .header__action {
    .header__action-item {
      &:not(:last-child) {
        margin-right: var(--gutter-sm);
      }
    }
  }
}
