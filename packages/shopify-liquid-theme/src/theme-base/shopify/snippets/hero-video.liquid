{% liquid
  assign views = 'mobile,desktop'
  assign views = views | split: ','
  assign has_mobile_video = false
  if block.settings.background_video_embed_mobile != blank or block.settings.background_video_file_mobile != blank
    assign has_mobile_video = true
  endif
%}

{% for view in views %}
  {% liquid
    assign video_embed_handle = 'background_video_embed'
    assign video_file_handle = 'background_video_file'
    if view == 'mobile'
      assign video_embed_handle = video_embed_handle | append: '_mobile'
      assign video_file_handle = video_file_handle | append: '_mobile'
    endif
  %}
  {% if has_mobile_video == false and view == 'mobile' %}{% continue %}{% endif %}
  <div class="hero-video{% if has_mobile_video and view == 'desktop' %} hidden md:flex{% elsif view == 'mobile' %} flex md:hidden h-full{% endif %}">
    {% if block.settings[video_embed_handle] == blank and block.settings[video_file_handle] != blank %}
      {% render 'ra-video', video: block.settings[video_file_handle] %}
    {% else %}
      <div class="embed {% if view == 'mobile' %}{{ block.settings.video_aspect_ratio_mobile }}{% else %}{{ block.settings.video_aspect_ratio }}{% endif %}">
        {% render 'ra-video',
          video_url: block.settings[video_embed_handle],
          muted: true,
          controls: false,
          autoplay: true
        %}
      </div>
    {% endif %}
  </div>
{% endfor %}
