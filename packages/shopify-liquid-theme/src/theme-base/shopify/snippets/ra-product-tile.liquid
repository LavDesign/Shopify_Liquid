{% comment %}
  Props:
  product:     Object - Shopify product Obj -  (required)
  class:       String add custom CSS class - (optional)
  pre_title:   String, extra text before product title - (optional)
  atc_button:  Boolean, toggle ATC button - (optional) [default=false]
  atc_label:   String, add custom ATC button text - (optional)
  atc_style:   String, [primary, secondary, tertiary] - optional
  index:       Number
  badge_text:  String, Add custom badge text
  badge_style: String, [primary, secondary, warning, danger, info, success] - (optional) [default=false]
  wishlist:    Boolean, toggle add wishlist button on hover - (optional) [default=false]
  wishlist_style: String, [primary, secondary, warning, danger, info, success] - optional

  hover_img: String, define hover image that will be used
  hover_img_alt: String, define alt text for hover image

  font_color:  String, hex code for text color - (optional)


  Example product-tile snippet:
  {% render 'ra-product-tile' product: product %}
{% endcomment %}

{% liquid
  unless pre_title
    assign pre_title = product.type
  endunless
  unless badge_style
    assign badge_style = 'primary'
  endunless
  if product.selected_or_first_available_variant.metafields.badge.label
    assign badge_text = product.selected_or_first_available_variant.metafields.badge.label
  else
    assign badge_text = product.metafields.badge.label
  endif
  assign wishlistStyle = wishlist_style | default: 'danger'
%}

<div data-aos="fade-up" data-aos-delay="{{ '50' | times: index }}" class="ra-product-tile ra-product-tile--default">
  <div class="ra-product-tile__media">
    {% if product.featured_image %}
      <a href="{{ product.url }}" class="ra-product-tile__media-link">
        <!-- ra-image -->
        <div
          class="ra-image ra-image--use-aspect-ratio ra-product-tile__image"
          style="--media-width:1; --media-height:1.2;"
        >
          {{
            product.featured_image
            | image_url: width: 450
            | image_tag: width: '1', height: '1.2', class: 'ra-image__media', loading: 'lazy'
          }}
        </div>
        <!-- ra hover-image -->
        {% if hover_img != blank %}
          <div
            class="ra-image ra-image--use-aspect-ratio ra-product-tile__image"
            style="--media-width:1; --media-height:1.2;"
          >
            {{
              hover_img
              | image_url: width: 450
              | image_tag: width: '1', height: '1.2', class: 'ra-image__media', loading: 'lazy'
            }}
          </div>
        {% endif %}
      </a>
    {% endif %}
    {% if badge_text and badge_style != blank %}
      {% render 'ra-badge', class: 'ra-product-tile__badge', label: badge_text, style: badge_style %}
    {% endif %}
    {% if wishlist %}
      {%
        render 'ra-icon-button'
        type: 'ra-button',
        style: wishlistStyle,
        size: 'sm',
        label: 'Add {{ product.title }} to wishlist',
        rounded: true,
        class: 'ra-product-tile__wishlist',
        icon: 'heart'
      %}
    {% endif %}
    {% if atc_button == true %}
      <div>
        <button
          type="button"
          aria-label="Add to Cart {{ product.title }}"
          class="ra-product-tile__atc ra-button ra-button--{{ atc_style | default: 'tertiary' }} ra-button--sm"
        >
          {% if atc_label != blank %}
            {{ atc_label }}
          {% else %}
            {{ 'products.product.add_to_cart' | t | capitalize }}
          {% endif %}
        </button>
      </div>
    {% endif %}
  </div>
  <div
    class="ra-product-tile__details"
    {% if font_color %}
      style="color: var({{ font_color }})"
    {% endif %}
  >
    {% if pre_title != blank %}
      <p class="ra-product-tile__attribute">
        {{- pre_title -}}
      </p>
    {% endif %}
    <a href="{{ product.url }}" class="ra-product-tile__name">
      {{ product.title }}
    </a>
    {% if product.selected_or_first_available_variant.title != 'Default Title' %}
    <p class="ra-product-tile__attribute">
      {{ product.selected_or_first_available_variant.title }}
    </p>
    {% endif %}
    <!-- Product Price -->
    {% render 'ra-price', product: product, class: 'ra-product-tile__price' %}
    <!-- Rating -->
    <div
      raw
      link
      class="ra-product-tile__rating ra-rating"
    >
      {% render 'ra-review-stars', platform: settings.review_platform, product: product %}
    </div>
  </div>
</div>
