{% comment %}
Make a list of filters to display as buttons based on filter.label
{% endcomment %}

{% liquid
  assign button_filters_string = "size"
  assign button_filters = button_filters_string | split: ","
%}

<ra-collection-filters>
  <div class="flex justify-between">
    <div class="h5">Filters</div>
    <div class="ra-link"></div>
  </div>
  <form id="CollectionFilters">
    <ra-accordion class="ra-accordion" data-multi-open="true">
      {%- for filter in collection.filters -%}
        {% assign as_buttons = false %}
        {% if button_filters contains filter.label %}
          {% assign as_buttons = true %}
        {% endif %}
        {% capture filter_content %}
          {% render "ra-filter-group", filter: filter, as_buttons: as_buttons %}
        {% endcapture %}
        {% render "accordion-item", title: filter.label, content: filter_content, show_icon: true, is_open: true %}
      {%- endfor -%}
    </ra-accordion>
  </form>
</ra-collection-filters>

{%- for value in filter.active_values -%}
  <facet-remove>
    <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
      <span class="active-facets__button-inner button button--tertiary">
        {{ filter.label }}: {{ value.label | escape }}
        {% render 'icon-close-small' %}
        <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
      </span>
    </a>
  </facet-remove>
  {% if filter.type == 'price_range' %}
    {%- if filter.min_value.value != null or filter.max_value.value != null -%}
      <facet-remove>
        <a href="{{ filter.url_to_remove }}" class="active-facets__button active-facets__button--light">
          <span class="active-facets__button-inner button button--tertiary">
            {%- if filter.min_value.value -%}
              {{ filter.min_value.value | money }}
            {%- else -%}
              {{ 0 | money }}
            {%- endif -%}
            -
            {%- if filter.max_value.value -%}
              {{ filter.max_value.value | money }}
            {%- else -%}
              {{ filter.range_max | money }}
            {%- endif -%}
            {% render 'icon-close-small' %}
            <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
          </span>
        </a>
      </facet-remove>
    {%- endif -%}
  {% endif %}
{%- endfor -%}
