{% liquid
  assign title_level = section.settings.title_level

  assign cta_one_text = section.settings.cta_one_text
  assign cta_one_url = section.settings.cta_one_url
  assign cta_one_style = section.settings.cta_one_style

  assign cta_two_text = section.settings.cta_two_text
  assign cta_two_url = section.settings.cta_two_url
  assign cta_two_style = section.settings.cta_two_style

  assign enable_cta_one = false
  assign enable_cta_two = false

  if cta_one_text != blank and cta_one_url != blank
    assign enable_cta_one = true
  endif

  if cta_two_text != blank and cta_two_url != blank
    assign enable_cta_two = true
  endif

  assign section_split = section.settings.section_split
  assign aspect_ratio = section.settings.aspect_ratio
  assign image_width = 850

  case aspect_ratio
    when 'square'
      assign width = image_width
      assign height = image_width
    when 'tall'
      assign width = image_width
      assign height = image_width | divided_by: 0.85
    when 'wide'
      assign width = image_width
      assign height = image_width | times: 0.625
    else
      assign width = section.settings.image.width
      assign height = width | divided_by: section.settings.image.aspect_ratio
  endcase
%}

{% style %}
  #shopify-section-{{ section.id }} .ra-split-section {
    {%- if section.settings.bg_color != blank -%}
      --component-bg-color: {{- section.settings.bg_color -}};
    {%- endif -%}
    {%- if section.settings.bg_color_md != blank -%}
      --component-bg-color-md: {{- section.settings.bg_color_md -}};
    {%- endif -%}
    {%- if section.settings.fg_color != blank -%}
      --component-fg-color: {{- section.settings.fg_color -}};
    {%- endif -%}
    {%- if section.settings.fg_color_md != blank -%}
      --component-fg-color-md: {{- section.settings.fg_color_md -}};
    {%- endif -%}
  }

  #shopify-section-{{ section.id }} .ra-left-split {
    --col-size: 100%;
    {% case section_split %}
      {% when '1' %}
        --col-size-md: 50%;
      {% when '2' %}
      --col-size-md: 60%;
      {% when '3' %}
      --col-size-md: 40%;
    {% endcase %}
  }

  #shopify-section-{{ section.id }} .ra-right-split {
    {% case section_split %}
      {% when '1' %}
        --col-size-md: 50%;
      {% when '2' %}
      --col-size-md: 40%;
      {% when '3' %}
      --col-size-md: 60%;
    {% endcase %}
  }

  #shopify-section-{{- section.id -}} .ra-split-section__image {
    {% case aspect_ratio %}
      {% when 'square' %}
        --media-width:1; --media-height: 1;
      {% when 'tall' %}
        --media-width:1; --media-height: 0.85;
      {% when 'wide' %}
        --media-width:1; --media-height: 0.625;
    {% endcase %}
  }
{% endstyle %}

<div class="max-w-screen-2xl mx-auto">
  <article class="ra-split-section set--details-{{ section.settings.details_location }}-sm set--details-{{ section.settings.details_location_md }} set--aspect-ratio-{{ section.settings.aspect_ratio -}}">
    <div class="ra-split-section__layout-container component-layout ra-row ra-no-gap !items-stretch">
      <div
        data-col-size="-size"
        data-col-auto="-md"
        class="component-media ra-col ra-left-split"
      >
        {% if section.settings.image != blank %}
          <div class="ra-split-section__media">
            <div class="ra-image ra-split-section__image ra-image--use-aspect-ratio">
              {% render "image", image: section.settings.image, width: width, height: height, class: "ra-image__media" %}
              {% comment %} <img
                loading="lazy"
                src="{{ section.settings.image | img_url: '700x' }}"
                alt="{{ section.settings.image.alt | default: 'split-image' }}"
                width="{{ width }}"
                height="{{ height }}"
                class="ra-image__media"
              > {% endcomment %}
            </div>
          </div>
        {% endif %}
      </div>
      <div
        data-col-size="-size,-md"
        class="component-details ra-split-section__details ra-col ra-right-split"
      >
        <div class="ra-split-section__copy set--v-align-{{ section.settings.vertical_align }}-sm set--v-align-{{ section.settings.vertical_align_md }}-md set--h-align-{{ section.settings.horizontal_align }}-sm set--h-align-{{ section.settings.horizontal_align_md }}-md">
          {% if section.settings.subtitle != blank %}
            <div class="ra-split-section__subtitle">
              {{- section.settings.subtitle -}}
            </div>
          {% endif %}
          {% if section.settings.title != blank %}
            <{{ title_level }}
              class="ra-title ra-split-section__title {{ section.settings.title_as }}"
            >
              <div>{{- section.settings.title -}}</div>
            </{{ title_level }}>
          {% endif %}
          {% if section.settings.description != blank %}
            <div class="ra-split-section__description {{ section.settings.description_copy_size }}">
              {{- section.settings.description -}}
            </div>
          {% endif %}

          {% if enable_cta_one or enable_cta_two %}
            <div class="ra-link-list ra-text-only-banner__link-list">
              {% if enable_cta_one %}
                {% render 'button',
                  type: 'a',
                  style: cta_one_style,
                  url: cta_one_url,
                  label: cta_one_text,
                  class: 'ra-link-list'
                %}
              {% endif %}
              {% if enable_cta_two %}
                {% render 'button',
                  type: 'a',
                  style: cta_two_style,
                  url: cta_two_url,
                  label: cta_two_text,
                  class: 'ra-link-list'
                %}
              {% endif %}
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </article>
</div>

{% schema %}
{
  "name": "Split Section",
  "settings": [
    {
      "type": "header",
      "content": "Section Content"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Section Sub-Title"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Section Title"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Section Description"
    },
    {
      "type": "select",
      "id": "description_copy_size",
      "label": "Description body copy size",
      "options": [
        {
          "value": "text-xs",
          "label": "Tiny"
        },
        {
          "value": "text-sm",
          "label": "Small"
        },
        {
          "value": "text-base",
          "label": "Base"
        },
        {
          "value": "text-lg",
          "label": "Large"
        }
      ],
      "default": "text-lg"
    },
    {
      "type": "select",
      "id": "title_as",
      "label": "Title As",
      "info": "Choose which heading to (style) the title",
      "options": [
        {
          "value": "h1",
          "label": "H1"
        },
        {
          "value": "h2",
          "label": "H2"
        },
        {
          "value": "h3",
          "label": "H3"
        },
        {
          "value": "h4",
          "label": "H4"
        },
        {
          "value": "h5",
          "label": "H5"
        },
        {
          "value": "h6",
          "label": "H6"
        }
      ],
      "default": "h4"
    },
    {
      "type": "select",
      "id": "title_level",
      "label": "Title Level",
      "info": "Choose the semantic H-Tag for this title",
      "options": [
        {
          "value": "h1",
          "label": "H1"
        },
        {
          "value": "h2",
          "label": "H2"
        },
        {
          "value": "h3",
          "label": "H3"
        },
        {
          "value": "h4",
          "label": "H4"
        },
        {
          "value": "h5",
          "label": "H5"
        },
        {
          "value": "h6",
          "label": "H6"
        }
      ],
      "default": "h1"
    },
    {
      "type": "header",
      "content": "Section Media"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "select",
      "id": "aspect_ratio",
      "label": "Aspect Ratio",
      "info": "Choose aspect ratio for section media image",
      "options": [
        {
          "value": "square",
          "label": "Square"
        },
        {
          "value": "tall",
          "label": "Tall"
        },
        {
          "value": "wide",
          "label": "Wide"
        },
        {
          "value": "respect-media",
          "label": "Respect Media"
        },
        {
          "value": "fill-space",
          "label": "Fill Space"
        }
      ]
    },
    {
      "type": "header",
      "content": "Layout and Alignment"
    },
    {
      "type": "select",
      "id": "section_split",
      "label": "Section Split",
      "info": "Choose between 50/50 60/40 & 40/60 split (desktop only)",
      "options": [
        {
          "value": "1",
          "label": "50/50"
        },
        {
          "value": "2",
          "label": "60/40"
        },
        {
          "value": "3",
          "label": "40/60"
        }
      ],
      "default": "1"
    },
    {
      "type": "select",
      "id": "details_location",
      "label": "Mobile Layout",
      "info": "Choose layout for mobile devices",
      "options": [
        {
          "value": "before",
          "label": "Imagery right, Text left"
        },
        {
          "value": "after",
          "label": "Imagery left, Text-right"
        },
        {
          "value": "overlay",
          "label": "Overlay"
        }
      ],
      "default": "after"
    },
    {
      "type": "select",
      "id": "details_location_md",
      "label": "Desktop Layout",
      "info": "Choose layout for desktop",
      "options": [
        {
          "value": "before",
          "label": "Imagery right, Text left"
        },
        {
          "value": "after",
          "label": "Imagery left, Text-right"
        },
        {
          "value": "overlay",
          "label": "Overlay"
        }
      ],
      "default": "after"
    },
    {
      "type": "select",
      "id": "horizontal_align",
      "label": "Mobile Horizontal Alignment",
      "info": "Set horizontal alignment for content on mobile devices",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ]
    },
    {
      "type": "select",
      "id": "horizontal_align_md",
      "label": "Desktop Horizontal Alignment",
      "info": "Set horizontal alignment for content on desktop",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ]
    },
    {
      "type": "select",
      "id": "vertical_align",
      "label": "Mobile Vertical Alignment",
      "info": "Set vertical alignment for content on mobile devices IF overlay layout is selected",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "middle",
          "label": "Middle"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ]
    },
    {
      "type": "select",
      "id": "vertical_align_md",
      "label": "Desktop Vertical Alignment",
      "info": "Set vertical alignment for content on desktop",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "middle",
          "label": "Middle"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ]
    },
    {
      "type": "header",
      "content": "CTA's"
    },
    {
      "type": "text",
      "id": "cta_one_text",
      "label": "CTA 1 Text",
      "default": "Default"
    },
    {
      "type": "url",
      "id": "cta_one_url",
      "label": "CTA 1 Url"
    },
    {
      "type": "select",
      "id": "cta_one_style",
      "label": "CTA One Style",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        },
        {
          "value": "tertiary",
          "label": "Tertiary"
        }
      ],
      "default": "primary"
    },
    {
      "type": "header",
      "content": "CTA Two"
    },
    {
      "type": "text",
      "id": "cta_two_text",
      "label": "CTA 2 Text",
      "default": "Secondary"
    },
    {
      "type": "url",
      "id": "cta_two_url",
      "label": "CTA 2 Url"
    },
    {
      "type": "select",
      "id": "cta_two_style",
      "label": "CTA Two Style",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        },
        {
          "value": "tertiary",
          "label": "Tertiary"
        }
      ],
      "default": "secondary"
    },
    {
      "type": "header",
      "content": "Section Styles"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Mobile Background Color"
    },
    {
      "type": "color",
      "id": "bg_color_md",
      "label": "Desktop Background Color",
      "info": "Set background color for larger screen sizes (if different from mobile)"
    },
    {
      "type": "color",
      "id": "fg_color",
      "label": "Mobile Text Color"
    },
    {
      "type": "color",
      "id": "fg_color_md",
      "label": "Desktop Text Color",
      "info": "Set text color for larger screen sizes (if different from mobile)"
    }
  ],
  "presets": [
    {
      "name": "Split Section"
    }
  ]
}
{% endschema %}
